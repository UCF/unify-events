{% extends 'events/manager/base.html' %}
{% block content_body %}
	<div class="span-8" id="sidebar">
		
		<ul id="calendars">
			<li class="even">
				Upcoming Events
			</li>
			{% for calendar in user.calendars %}
			<li class="{% cycle 'even' 'odd' %} clearfix">
				<div class="fleft">
					{{calendar.name}}
					<ul class="actions">
						<li><a href="">View</a></li>
						<li><a href="">Create Event</a></li>
						<li class="last"><a href="">Edit Details</a></li>
					</ul>
				</div>
				<div class="fright stats">
					<p>10 Events</p>
					<p>1,529 Views</p>
				</div>
			</li>
			{% endfor %}
		</ul>
	</div>
	<div class="span-13 prepend-1 last">
		<table id="events">
			<thead>
				<tr>
					<th scope="col"></th>
					<th scope="col">Title</th>
					<th scope="col">Dates &amp;Times</th>
				</tr>
			</thead>
			<tbody>
				{% for event in events %}
				<tr>
					<td><input type="checkbox" /></td>
					<td>{{event.title}}</td>
					<td>
						{% if event.were_previous_instances %}<p>Previous instances...</p>{% endif %}
						<ul>
						{% for instance in event.upcoming_instances|slice:":3" %}
							<li>{{instance.start}}</li>
						{% endfor %}
						</ul>
						{% if event.upcoming_instances|length > 3 %}<p>Future instances..</p>{% endif %}
					</td>
				</tr>
				{% empty %}
				<tr>
					<td colspan="3">
						There are no upcoming events
						{% if calendar %}for this calendar{% endif %}.
						
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}