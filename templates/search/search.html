{% extends 'events/frontend/base.html' %}
{% load widget_tweaks %}

{% block content_title_icon %}
<i class="icon-search" id="page-title-icon"></i>
{% endblock %}

{% block content_title %}
<h1>
    {% if not query %}
    <a href="#">Search</a>
    {% else %}
    <a href="#">Results For: <span class="alt"><em>&ldquo;{{ query }}&rdquo;</em></span></a>
    {% endif %}
</h1>
{% endblock %}

{% block content_body %}
<div class="row">
    <div class="span9 page-content" id="search">

        <form method="get" action=".">
            <table>
                {{ form.as_table }}
                <tr>
                    <td>&nbsp;</td>
                    <td>
                        <input type="submit" value="Search">
                    </td>
                </tr>
            </table>
            {{ form.q.label }}
            {{ form.q|add_class:"search-query" }}
            
        </form>    
            
    
            {% if query %}
                <h3>Results</h3>
                {% for result in page.object_list %}
                    <p>
                        <a href="{{ result.object.get_absolute_url }}">{{ result.object.title }}</a>
                        {% for tag in result.object.tags.all %}
                        {{ tag }}
                        {% endfor %}
                    </p>
                {% empty %}
                    <p>No results found.</p>
                {% endfor %}


            <div class="pagination">
                <ul>
                    {% if page.has_previous %}
                    <li>
                        <a href="?page={{ page.previous_page_number }}">&laquo;</a>
                    </li>
                    {% else %}
                    <li class="disabled">
                        <a href="#">&laquo;</a>
                    </li>
                    {% endif %}
                    {% for pagenum in page.paginator.page_range %}
                    <li{% if pagenum == page.number %} class="active"{% endif %}>
                        <a href="?page={{ pagenum }}">{{ pagenum }}</a>
                    </li>
                    {% endfor %}
                    {% if page.has_next %}
                    <li>
                        <a href="?page={{ page.next_page_number }}">&raquo;</a>
                    </li>
                    {% else %}
                    <li class="disabled">
                        <a href="#">&raquo;</a>
                    </li>
                    {% endif %}
                </ul>
            </div>

            {% else %}
                {# Show some example queries to run, maybe query syntax, something else? #}
            {% endif %}
    </div>
</div>
{% endblock %}