{% extends 'events/manager/base.html' %}
{% block footer_scripts %}
	{{block.super}}
	<script type="text/javascript">
		$().ready(function() {
			$('#id_name')
				.keyup(function() {
					$('#id_slug').val(sluggify($(this).val()));
				})
		});
	</script>
{% endblock %}
{% block content_body %}
	<div id="calendar-create-update">
		{% if mode == 'create' %}
			<h2>Create a Calendar</h2>
			<form action="{% url calendar-create %}" method="post" id="calendar-create">
		{% else %}
			{% if mode == 'update' %}
				<h2>Update {{calendar.name}} Calendar</h2>
				<form action="{% url calendar-update calendar_id=calendar.id %}" method="post" id="calendar-create">
			{% endif %}
		{% endif %}
				{% if form.non_field_errors %}
				<p>{{form.non_field_errors}}</p>
			{% endif %}
			<table>
				<tbody>
                    {{ form.as_table }}
				</tbody>
			</table>
			{% for field in form.hidden_fields %}
				{{field}}
			{% endfor %}
			{% if mode == 'create' %}
				<button type="submit">Create</button>
			{% else %}
				{% if mode == 'update' %}
					<button type="submit">Update</button>
					<a href="{% url calendar-delete calendar_id=calendar.id %}" class="button">Delete Calendar</a>
				{% endif %}
			{% endif %}
		</form>
	</div>
{% endblock %}