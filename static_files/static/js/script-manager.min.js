!function(e,t){"use strict";"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(c){"use strict";function n(e,t){this.$element=c(e),this.options=c.extend({},c.fn.typeahead.defaults,t),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=c(this.options.menu),this.$appendTo=this.options.appendTo?c(this.options.appendTo):null,this.fitToElement="boolean"==typeof this.options.fitToElement&&this.options.fitToElement,this.shown=!1,this.listen(),this.showHintOnFocus=("boolean"==typeof this.options.showHintOnFocus||"all"===this.options.showHintOnFocus)&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.addItem=!1,this.value=this.$element.val()||this.$element.text()}n.prototype={constructor:n,select:function(){var e,t=this.$menu.find(".active").data("value");return this.$element.data("active",t),(this.autoSelect||t)&&(e=(e=this.updater(t))||"",this.$element.val(this.displayText(e)||e).text(this.displayText(e)||e).change(),this.afterSelect(e)),this.hide()},updater:function(e){return e},setSource:function(e){this.source=e},show:function(){var e,t,i=c.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),a="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight;this.shown?e=this.$menu:this.$appendTo?(e=this.$menu.appendTo(this.$appendTo),this.hasSameParent=this.$appendTo.is(this.$element.parent())):(e=this.$menu.insertAfter(this.$element),this.hasSameParent=!0),this.hasSameParent||(e.css("position","fixed"),t=this.$element.offset(),i.top=t.top,i.left=t.left);var s=c(e).parent().hasClass("dropup")?"auto":i.top+i.height+a,n=c(e).hasClass("dropdown-menu-right")?"auto":i.left;return e.css({top:s,left:n}).show(),!0===this.options.fitToElement&&e.css("width",this.$element.outerWidth()+"px"),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){if(this.query=null!=e?e:this.$element.val()||this.$element.text()||"",this.query.length<this.options.minLength&&!this.options.showHintOnFocus)return this.shown?this.hide():this;var t=c.proxy(function(){c.isFunction(this.source)?this.source(this.query,c.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(t,this.delay)},process:function(e){var t=this;return e=c.grep(e,function(e){return t.matcher(e)}),(e=this.sorter(e)).length||this.options.addItem?(0<e.length?this.$element.data("active",e[0]):this.$element.data("active",null),this.options.addItem&&e.push(this.options.addItem),"all"==this.options.items?this.render(e).show():this.render(e.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(e){return~this.displayText(e).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,i=[],a=[],s=[];t=e.shift();){var n=this.displayText(t);n.toLowerCase().indexOf(this.query.toLowerCase())?~n.indexOf(this.query)?a.push(t):s.push(t):i.push(t)}return i.concat(a,s)},highlighter:function(e){var t,i,a,s,n=c("<div></div>"),o=this.query,r=e.toLowerCase().indexOf(o.toLowerCase()),l=o.length;if(0===l)return n.text(e).html();for(;-1<r;)t=e.substr(0,r),i=e.substr(r,l),a=e.substr(r+l),s=c("<strong></strong>").text(i),n.append(document.createTextNode(t)).append(s),r=(e=a).toLowerCase().indexOf(o.toLowerCase());return n.append(document.createTextNode(e)).html()},render:function(i){var a=this,s=this,n=!1,o=[],r=a.options.separator;return c.each(i,function(e,t){0<e&&t[r]!==i[e-1][r]&&o.push({__type:"divider"}),!t[r]||0!==e&&t[r]===i[e-1][r]||o.push({__type:"category",name:t[r]}),o.push(t)}),i=c(o).map(function(e,t){if("category"==(t.__type||!1))return c(a.options.headerHtml).text(t.name)[0];if("divider"==(t.__type||!1))return c(a.options.headerDivider)[0];var i=s.displayText(t);return(e=c(a.options.item).data("value",t)).find("a").html(a.highlighter(i,t)),i==s.$element.val()&&(e.addClass("active"),s.$element.data("active",t),n=!0),e[0]}),this.autoSelect&&!n&&(i.filter(":not(.dropdown-header)").first().addClass("active"),this.$element.data("active",i.first().data("value"))),this.$menu.html(i),this},displayText:function(e){return void 0!==e&&void 0!==e.name&&e.name||e},next:function(e){var t=this.$menu.find(".active").removeClass("active").next();t.length||(t=c(this.$menu.find("li")[0])),t.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active").prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",c.proxy(this.focus,this)).on("blur",c.proxy(this.blur,this)).on("keypress",c.proxy(this.keypress,this)).on("input",c.proxy(this.input,this)).on("keyup",c.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",c.proxy(this.keydown,this)),this.$menu.on("click",c.proxy(this.click,this)).on("mouseenter","li",c.proxy(this.mouseenter,this)).on("mouseleave","li",c.proxy(this.mouseleave,this)).on("mousedown",c.proxy(this.mousedown,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("input").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove(),this.destroyed=!0},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown)switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:if(e.shiftKey)return;e.preventDefault(),this.prev();break;case 40:if(e.shiftKey)return;e.preventDefault(),this.next()}},keydown:function(e){this.suppressKeyPressRepeat=~c.inArray(e.keyCode,[40,38,9,13,27]),this.shown||40!=e.keyCode?this.move(e):this.lookup()},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},input:function(){var e=this.$element.val()||this.$element.text();this.value!==e&&(this.value=e,this.lookup())},keyup:function(e){if(!this.destroyed)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide()}},focus:function(){this.focused||(this.focused=!0,this.options.showHintOnFocus&&!0!==this.skipShowHintOnFocus&&("all"===this.options.showHintOnFocus?this.lookup(""):this.lookup())),this.skipShowHintOnFocus&&(this.skipShowHintOnFocus=!1)},blur:function(){this.mousedover||this.mouseddown||!this.shown?this.mouseddown&&(this.skipShowHintOnFocus=!0,this.$element.focus(),this.mouseddown=!1):(this.hide(),this.focused=!1)},click:function(e){e.preventDefault(),this.skipShowHintOnFocus=!0,this.select(),this.$element.focus(),this.hide()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),c(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()},mousedown:function(){this.mouseddown=!0,this.$menu.one("mouseup",function(e){this.mouseddown=!1}.bind(this))}};var e=c.fn.typeahead;c.fn.typeahead=function(a){var s=arguments;return"string"==typeof a&&"getActive"==a?this.data("active"):this.each(function(){var e=c(this),t=e.data("typeahead"),i="object"==typeof a&&a;t||e.data("typeahead",t=new n(this,i)),"string"==typeof a&&t[a]&&(1<s.length?t[a].apply(t,Array.prototype.slice.call(s,1)):t[a]())})},c.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:c.noop,addItem:!1,delay:0,separator:"category",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'},c.fn.typeahead.Constructor=n,c.fn.typeahead.noConflict=function(){return c.fn.typeahead=e,this},c(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var t=c(this);t.data("typeahead")||t.typeahead(t.data())})}),function(){"use strict";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,e){var i,a=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)),a}function n(s){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?t(Object(n),!0).forEach(function(e){var t,i,a;t=s,a=n[i=e],i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(n,e))})}return s}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s,n=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return n=e.done,e},e:function(e){o=!0,s=e},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw s}}}}function O(e,t){if(null===e)return null;if("number"!=typeof t.step)return e;var i=e%(60*t.step);return(i-=(t.minTime||0)%(60*t.step))>=30*t.step?e+=60*t.step-i:e-=i,function(e,t){if(e==U&&t.show2400)return e;return e%U}(e,t)}var U=86400;var e,l={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,durationTime:null,forceRoundTime:!1,lang:{},listWidth:null,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:O,scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1,wrapHours:!0},c={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},m=function(){function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=a.extractAttrOptions(e,Object.keys(l));this.settings=this.parseSettings(n(n(n({},l),t),i))}var e,t,i;return e=a,i=[{key:"extractAttrOptions",value:function(e,t){var i,a={},s=o(t);try{for(s.s();!(i=s.n()).done;){var n=i.value;n in e.dataset&&(a[n]=e.dataset[n])}}catch(e){s.e(e)}finally{s.f()}return a}}],(t=[{key:"time2int",value:function(e){if(""===e||null==e)return null;if(e instanceof Date)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds();if("string"!=typeof e)return e;"a"!=(e=e.toLowerCase().replace(/[\s\.]/g,"")).slice(-1)&&"p"!=e.slice(-1)||(e+="m");var t=e.match(/^(([^0-9]*))?([0-9]?[0-9])(\W?([0-5][0-9]))?(\W+([0-5][0-9]))?(([^0-9]*))$/);if(!t)return null;var i=parseInt(+t[3],10),a=t[2]||t[9],s=i,n=+t[5]||0,o=+t[7]||0;if(a||2!=t[3].length||"0"!=t[3][0]||(a="am"),i<=12&&a)var r=(a=a.trim())==this.settings.lang.pm||a==this.settings.lang.PM,s=12==i?r?12:0:i+(r?12:0);else if(3600*i+60*n+o>=U+(this.settings.show2400?1:0)){if(!1===this.settings.wrapHours)return null;s=i%24}var l,c=3600*s+60*n+o;return i<12&&!a&&this.settings._twelveHourTime&&this.settings.scrollDefault&&((l=c-this.settings.scrollDefault())<0&&U/-2<=l&&(c=(c+U/2)%U)),c}},{key:"parseSettings",value:function(e){var t,i=this;if(e.lang=n(n({},c),e.lang),(this.settings=e).minTime&&(e.minTime=this.time2int(e.minTime)),e.maxTime&&(e.maxTime=this.time2int(e.maxTime)),e.listWidth&&(e.listWidth=this.time2int(e.listWidth)),e.durationTime&&"function"!=typeof e.durationTime&&(e.durationTime=this.time2int(e.durationTime)),"now"==e.scrollDefault?e.scrollDefault=function(){return e.roundingFunction(i.time2int(new Date),e)}:e.scrollDefault&&"function"!=typeof e.scrollDefault?(t=e.scrollDefault,e.scrollDefault=function(){return e.roundingFunction(i.time2int(t),e)}):e.minTime&&(e.scrollDefault=function(){return e.roundingFunction(e.minTime,e)}),"string"==typeof e.timeFormat&&e.timeFormat.match(/[gh]/)&&(e._twelveHourTime=!0),!1===e.showOnFocus&&-1!=e.showOn.indexOf("focus")&&e.showOn.splice(e.showOn.indexOf("focus"),1),e.disableTimeRanges||(e.disableTimeRanges=[]),0<e.disableTimeRanges.length){for(var a in e.disableTimeRanges)e.disableTimeRanges[a]=[this.time2int(e.disableTimeRanges[a][0]),this.time2int(e.disableTimeRanges[a][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(e,t){return e[0]-t[0]});for(a=e.disableTimeRanges.length-1;0<a;a--)e.disableTimeRanges[a][0]<=e.disableTimeRanges[a-1][1]&&(e.disableTimeRanges[a-1]=[Math.min(e.disableTimeRanges[a][0],e.disableTimeRanges[a-1][0]),Math.max(e.disableTimeRanges[a][1],e.disableTimeRanges[a-1][1])],e.disableTimeRanges.splice(a,1))}return e}}])&&s(e.prototype,t),i&&s(e,i),a}();e=function(b){var D={},T={init:function(s){return this.each(function(){var e=b(this),t=new m(this,s),i=t.settings;if(D=i.lang,e.data("timepicker-settings",i),e.data("timepicker-obj",t),e.addClass("ui-timepicker-input"),i.useSelect)h(e);else{if(e.prop("autocomplete","off"),i.showOn)for(var a in i.showOn)e.on(i.showOn[a]+".timepicker",T.show);e.on("change.timepicker",o),e.on("keydown.timepicker",r),e.on("keyup.timepicker",l),i.disableTextInput&&e.on("keydown.timepicker",n),e.on("cut.timepicker",l),e.on("paste.timepicker",l),o.call(e.get(0),null,"initial")}})},show:function(e){var t=b(this),i=t.data("timepicker-settings"),a=t.data("timepicker-obj");if(e&&e.preventDefault(),i.useSelect)t.data("timepicker-list").focus();else{F(t)&&t.blur();var s=t.data("timepicker-list");if(!t.prop("readonly")&&(s&&0!==s.length&&"function"!=typeof i.durationTime||(h(t),s=t.data("timepicker-list")),!c(s))){t.data("ui-timepicker-value",t.val()),x(t,s),T.hide(),"number"==typeof i.listWidth&&s.width(t.outerWidth()*i.listWidth),s.show();var n={};i.orientation.match(/r/)?n.left=t.offset().left+t.outerWidth()-s.outerWidth()+parseInt(s.css("marginLeft").replace("px",""),10):i.orientation.match(/l/)?n.left=t.offset().left+parseInt(s.css("marginLeft").replace("px",""),10):i.orientation.match(/c/)&&(n.left=t.offset().left+(t.outerWidth()-s.outerWidth())/2+parseInt(s.css("marginLeft").replace("px",""),10)),"t"==(i.orientation.match(/t/)||!i.orientation.match(/b/)&&t.offset().top+t.outerHeight(!0)+s.outerHeight()>b(window).height()+b(window).scrollTop()?"t":"b")?(s.addClass("ui-timepicker-positioned-top"),n.top=t.offset().top-s.outerHeight()+parseInt(s.css("marginTop").replace("px",""),10)):(s.removeClass("ui-timepicker-positioned-top"),n.top=t.offset().top+t.outerHeight()+parseInt(s.css("marginTop").replace("px",""),10)),s.offset(n);var o,r,l=s.find(".ui-timepicker-selected");return l.length||(null!==(o=a.time2int(p(t)))?l=u(t,s,o):i.scrollDefault&&(l=u(t,s,i.scrollDefault()))),l.length&&!l.hasClass("ui-timepicker-disabled")||(l=s.find("li:not(.ui-timepicker-disabled):first")),l&&l.length?(r=s.scrollTop()+l.position().top-l.outerHeight(),s.scrollTop(r)):s.scrollTop(0),i.stopScrollPropagation&&b(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(e){e.preventDefault();var t=b(this).scrollTop();b(this).scrollTop(t+e.originalEvent.deltaY)}),b(document).on("mousedown.ui-timepicker",d),b(window).on("resize.ui-timepicker",d),i.closeOnWindowScroll&&b(document).on("scroll.ui-timepicker",d),t.trigger("showTimepicker"),this}}},hide:function(){var e=b(this),t=e.data("timepicker-settings");return t&&t.useSelect&&e.blur(),b(".ui-timepicker-wrapper").each(function(){var e,t,i=b(this);c(i)&&((t=(e=i.data("timepicker-input")).data("timepicker-settings"))&&t.selectOnBlur&&S(e),i.hide(),e.trigger("hideTimepicker"))}),this},option:function(s,n){return"string"==typeof s&&void 0===n?b(this).data("timepicker-settings")[s]:this.each(function(){var e=b(this),t=e.data("timepicker-settings"),i=e.data("timepicker-obj"),a=e.data("timepicker-list");"object"==f(s)?t=b.extend(t,s):"string"==typeof s&&(t[s]=n),t=i.parseSettings(t),e.data("timepicker-settings",t),o.call(e.get(0),{type:"change"},"initial"),a&&(a.remove(),e.data("timepicker-list",!1)),t.useSelect&&h(e)})},getSecondsFromMidnight:function(){return b(this).data("timepicker-obj").time2int(p(this))},getTime:function(e){var t=b(this),i=t.data("timepicker-obj"),a=p(t);if(!a)return null;var s=i.time2int(a);if(null===s)return null;e=e||new Date;var n=new Date(e);return n.setHours(s/3600),n.setMinutes(s%3600/60),n.setSeconds(s%60),n.setMilliseconds(0),n},isVisible:function(){var e=this.data("timepicker-list");return!(!e||!c(e))},setTime:function(e){var t,i=this,a=i.data("timepicker-settings"),s=i.data("timepicker-obj");return t=(a.forceRoundTime?_:$)(s.time2int(e),a),e&&null===t&&a.noneOption&&(t=e),M(i,t,"initial"),o.call(i.get(0),{type:"change"},"initial"),i.data("timepicker-list")&&x(i,i.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var t=e.data("timepicker-settings");return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),t.useSelect&&e.show(),e.removeData("timepicker-list"),this}}};function c(e){var t=e[0];return 0<t.offsetWidth&&0<t.offsetHeight}function h(t){var i,e=t.data("timepicker-settings"),a=t.data("timepicker-list"),s=t.data("timepicker-obj");if(a&&a.length&&(a.remove(),t.data("timepicker-list",!1)),e.useSelect?(a=b("<select />",{class:"ui-timepicker-select"}),t.attr("name")&&a.attr("name","ui-timepicker-"+t.attr("name")),i=a):(a=b("<ul />",{class:"ui-timepicker-list"}),(i=b("<div />",{class:"ui-timepicker-wrapper",tabindex:-1})).css({display:"none",position:"absolute"}).append(a)),e.noneOption)if(!0===e.noneOption&&(e.noneOption=e.useSelect?"Time...":"None"),b.isArray(e.noneOption))for(var n in e.noneOption){parseInt(n,10)==n&&(o=C(e.noneOption[n],e.useSelect),a.append(o))}else{var o=C(e.noneOption,e.useSelect);a.append(o)}e.className&&i.addClass(e.className),null===e.minTime&&null===e.durationTime||!e.showDuration||("function"==typeof e.step||e.step,i.addClass("ui-timepicker-with-duration"),i.addClass("ui-timepicker-step-"+e.step));var r=e.minTime;"function"==typeof e.durationTime?r=s.time2int(e.durationTime()):null!==e.durationTime&&(r=e.durationTime);var l=null!==e.minTime?e.minTime:0,c=null!==e.maxTime?e.maxTime:l+U-1;c<l&&(c+=U),c===U-1&&"string"===b.type(e.timeFormat)&&e.show2400&&(c=U);var h=e.disableTimeRanges,d=0,u=h.length,p=e.step;"function"!=typeof p&&(p=function(){return e.step});for(var f,n=l,m=0;n<=c;n+=60*p(++m)){var g,v,y,w=n,k=$(w,e);e.useSelect?(g=b("<option />",{value:k})).text(k):((g=b("<li />")).addClass(w%U<U/2?"ui-timepicker-am":"ui-timepicker-pm"),g.data("time",O(w,e)),g.text(k)),null===e.minTime&&null===e.durationTime||!e.showDuration||(v=function(e,t){e=Math.abs(e);var i,a,s=Math.round(e/60),n=[];s<60?n=[s,D.mins]:(i=Math.floor(s/60),a=s%60,30==t&&30==a&&(i+=D.decimal+5),n.push(i),n.push(1==i?D.hr:D.hrs),30!=t&&a&&(n.push(a),n.push(D.mins)));return n.join(" ")}(n-r,e.step),e.useSelect?g.text(g.text()+" ("+v+")"):((y=b("<span />",{class:"ui-timepicker-duration"})).text(" ("+v+")"),g.append(y))),d<u&&(w>=h[d][1]&&(d+=1),h[d]&&w>=h[d][0]&&w<h[d][1]&&(e.useSelect?g.prop("disabled",!0):g.addClass("ui-timepicker-disabled"))),a.append(g)}i.data("timepicker-input",t),t.data("timepicker-list",i),e.useSelect?(t.val()&&a.val(_(s.time2int(t.val()),e)),a.on("focus",function(){b(this).data("timepicker-input").trigger("showTimepicker")}),a.on("blur",function(){b(this).data("timepicker-input").trigger("hideTimepicker")}),a.on("change",function(){M(t,b(this).val(),"select")}),M(t,a.val(),"initial"),t.hide().after(a)):("string"==typeof(f=e.appendTo)?f=b(f):"function"==typeof f&&(f=f(t)),f.append(i),x(t,a),a.on("mousedown click","li",function(e){t.off("focus.timepicker"),t.on("focus.timepicker-ie-hack",function(){t.off("focus.timepicker-ie-hack"),t.on("focus.timepicker",T.show)}),F(t)||t[0].focus(),a.find("li").removeClass("ui-timepicker-selected"),b(this).addClass("ui-timepicker-selected"),S(t)&&(t.trigger("hideTimepicker"),a.on("mouseup.timepicker click.timepicker","li",function(e){a.off("mouseup.timepicker click.timepicker"),i.hide()}))}))}function C(e,t){var i,a,s;return"object"==f(e)?(i=e.label,a=e.className,s=e.value):"string"==typeof e?(i=e,s=""):b.error("Invalid noneOption value"),t?b("<option />",{value:s,class:a,text:i}):b("<li />",{class:a,text:i}).data("time",String(s))}function _(e,t){if(null!==(e=t.roundingFunction(e,t)))return $(e,t)}function d(e){var t;e.target!=window&&((t=b(e.target)).closest(".ui-timepicker-input").length||t.closest(".ui-timepicker-wrapper").length||(T.hide(),b(document).unbind(".ui-timepicker"),b(window).unbind(".ui-timepicker")))}function F(e){var t=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function u(e,t,a){if(!a&&0!==a)return!1;var i=e.data("timepicker-settings"),s=!1,a=i.roundingFunction(a,i);return t.find("li").each(function(e,t){var i=b(t);if("number"==typeof i.data("time"))return i.data("time")==a?(s=i,!1):void 0}),s}function x(e,t){t.find("li").removeClass("ui-timepicker-selected");var i,a,s=e.data("timepicker-settings"),n=e.data("timepicker-obj").time2int(p(e));null!==n&&(console.log(n),(i=u(e,t,n))&&(((a=i.offset().top-t.offset().top)+i.outerHeight()>t.outerHeight()||a<0)&&t.scrollTop(t.scrollTop()+i.position().top-i.outerHeight()),!s.forceRoundTime&&i.data("time")!==n||i.addClass("ui-timepicker-selected")))}function o(e,t){var i,a,s,n,o,r;"timepicker"!=t&&(i=b(this),""!==this.value?(!i.is(":focus")||e&&"change"==e.type)&&(a=i.data("timepicker-settings"),null!==(s=i.data("timepicker-obj").time2int(this.value))?(n=!1,null!==a.minTime&&null!==a.maxTime&&(s<a.minTime||s>a.maxTime)&&(n=!0),b.each(a.disableTimeRanges,function(){if(s>=this[0]&&s<this[1])return!(n=!0)}),!a.forceRoundTime||(o=a.roundingFunction(s,a))!=s&&(s=o,t=null),r=$(s,a),n?(M(i,r,"error")||e&&"change"==e.type)&&i.trigger("timeRangeError"):M(i,r,t)):i.trigger("timeFormatError")):M(i,null,t))}function p(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function M(e,t,i){var a,s;return e.is("input")&&(null===t&&""==e.val()||e.val(t),a=e.data("timepicker-settings"),s=e.data("timepicker-obj"),a.useSelect&&"select"!=i&&e.data("timepicker-list")&&e.data("timepicker-list").val(_(s.time2int(t),a))),e.data("ui-timepicker-value")!=t?(e.data("ui-timepicker-value",t),"select"==i?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):-1==["error","initial"].indexOf(i)&&e.trigger("changeTime"),1):void(-1==["error","initial"].indexOf(i)&&e.trigger("selectTime"))}function n(e){switch(e.keyCode){case 13:case 9:return;default:e.preventDefault()}}function r(e){var t=b(this),i=t.data("timepicker-list");if(!i||!c(i)){if(40!=e.keyCode)return!0;T.show.call(t.get(0)),i=t.data("timepicker-list"),F(t)||t.focus()}switch(e.keyCode){case 13:return S(t)&&(o.call(t.get(0),{type:"change"}),T.hide.apply(this)),e.preventDefault(),!1;case 38:var a=i.find(".ui-timepicker-selected");return a.length?a.is(":first-child")||(a.removeClass("ui-timepicker-selected"),a.prev().addClass("ui-timepicker-selected"),a.prev().position().top<a.outerHeight()&&i.scrollTop(i.scrollTop()-a.outerHeight())):(i.find("li").each(function(e,t){if(0<b(t).position().top)return a=b(t),!1}),a.addClass("ui-timepicker-selected")),!1;case 40:return 0===(a=i.find(".ui-timepicker-selected")).length?(i.find("li").each(function(e,t){if(0<b(t).position().top)return a=b(t),!1}),a.addClass("ui-timepicker-selected")):a.is(":last-child")||(a.removeClass("ui-timepicker-selected"),a.next().addClass("ui-timepicker-selected"),a.next().position().top+2*a.outerHeight()>i.outerHeight()&&i.scrollTop(i.scrollTop()+a.outerHeight())),!1;case 27:i.find("li").removeClass("ui-timepicker-selected"),T.hide();break;case 9:T.hide();break;default:return!0}}function l(e){var t=b(this),i=t.data("timepicker-list"),a=t.data("timepicker-settings");if(!i||!c(i)||a.disableTextInput)return!0;if("paste"!==e.type&&"cut"!==e.type)switch(e.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:a.typeaheadHighlight?x(t,i):i.hide()}else setTimeout(function(){a.typeaheadHighlight?x(t,i):i.hide()},0)}function S(e){var t=e.data("timepicker-settings"),i=null,a=e.data("timepicker-list").find(".ui-timepicker-selected");return!a.hasClass("ui-timepicker-disabled")&&(a.length&&(i=a.data("time")),null!==i&&("string"!=typeof i&&(i=$(i,t)),M(e,i,"select")),1)}function $(e,t){if("number"!=typeof e)return null;var i=parseInt(e%60),a=parseInt(e/60%60),s=parseInt(e/3600%24),n=new Date(1970,0,2,s,a,i,0);if(isNaN(n.getTime()))return null;if("function"===b.type(t.timeFormat))return t.timeFormat(n);for(var o,r,l="",c=0;c<t.timeFormat.length;c++)switch(r=t.timeFormat.charAt(c)){case"a":l+=11<n.getHours()?D.pm:D.am;break;case"A":l+=11<n.getHours()?D.PM:D.AM;break;case"g":l+=0===(o=n.getHours()%12)?"12":o;break;case"G":o=n.getHours(),e===U&&(o=t.show2400?24:0),l+=o;break;case"h":0!==(o=n.getHours()%12)&&o<10&&(o="0"+o),l+=0===o?"12":o;break;case"H":o=n.getHours(),e===U&&(o=t.show2400?24:0),l+=9<o?o:"0"+o;break;case"i":l+=9<(a=n.getMinutes())?a:"0"+a;break;case"s":l+=9<(i=n.getSeconds())?i:"0"+i;break;case"\\":c++,l+=t.timeFormat.charAt(c);break;default:l+=r}return l}b.fn.timepicker=function(e){return this.length?T[e]?this.hasClass("ui-timepicker-input")?T[e].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!==f(e)&&e?void b.error("Method "+e+" does not exist on jQuery.timepicker"):T.init.apply(this,arguments):this},b.fn.timepicker.defaults={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,durationTime:null,forceRoundTime:!1,listWidth:null,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(e,t){if(null===e)return null;if("number"!=typeof t.step)return e;var i=e%(60*t.step);return(i-=(t.minTime||0)%(60*t.step))>=30*t.step?e+=60*t.step-i:e-=i,_moduloSeconds(e,t)},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1,wrapHours:!0}},"object"===("undefined"==typeof exports?"undefined":f(exports))&&exports&&"object"===("undefined"==typeof module?"undefined":f(module))&&module&&module.exports===exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(M,S){function $(){return new Date(Date.UTC.apply(Date,arguments))}function O(){var e=new Date;return $(e.getFullYear(),e.getMonth(),e.getDate())}function n(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function e(e,t){return function(){return t!==S&&M.fn.datepicker.deprecated(t),this[e].apply(this,arguments)}}function b(e,t){M.data(e,"datepicker",this),this._events=[],this._secondaryEvents=[],this._process_options(t),this.dates=new i,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=M(e),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .input-group-append, .input-group-prepend, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=M(A.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(e,t){return Number(t)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()}var t,i=(t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),i=0,a=this.length;i<a;i++)if(0<=this[i].valueOf()-t&&this[i].valueOf()-t<864e5)return i;return-1},remove:function(e){this.splice(e,1)},replace:function(e){e&&(M.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var e=new i;return e.replace(this),e}},function(){var e=[];return e.push.apply(e,arguments),M.extend(e,t),e});b.prototype={constructor:b,_resolveViewName:function(i){return M.each(A.viewModes,function(e,t){if(i===e||-1!==M.inArray(i,t.names))return i=e,!1}),i},_resolveDaysOfWeek:function(e){return M.isArray(e)||(e=e.split(/[,\s]*/)),M.map(e,Number)},_check_template:function(e){try{return e===S||""===e?!1:(e.match(/[<>]/g)||[]).length<=0||0<M(e).length}catch(e){return!1}},_process_options:function(e){this._o=M.extend({},this._o,e);var t=this.o=M.extend({},this._o),i=t.language;U[i]||(i=i.split("-")[0],U[i]||(i=h.language)),t.language=i,t.startView=this._resolveViewName(t.startView),t.minViewMode=this._resolveViewName(t.minViewMode),t.maxViewMode=this._resolveViewName(t.maxViewMode),t.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,t.startView)),!0!==t.multidate&&(t.multidate=Number(t.multidate)||!1,!1!==t.multidate&&(t.multidate=Math.max(0,t.multidate))),t.multidateSeparator=String(t.multidateSeparator),t.weekStart%=7,t.weekEnd=(t.weekStart+6)%7;var a=A.parseFormat(t.format);t.startDate!==-1/0&&(t.startDate?t.startDate instanceof Date?t.startDate=this._local_to_utc(this._zero_time(t.startDate)):t.startDate=A.parseDate(t.startDate,a,t.language,t.assumeNearbyYear):t.startDate=-1/0),t.endDate!==1/0&&(t.endDate?t.endDate instanceof Date?t.endDate=this._local_to_utc(this._zero_time(t.endDate)):t.endDate=A.parseDate(t.endDate,a,t.language,t.assumeNearbyYear):t.endDate=1/0),t.daysOfWeekDisabled=this._resolveDaysOfWeek(t.daysOfWeekDisabled||[]),t.daysOfWeekHighlighted=this._resolveDaysOfWeek(t.daysOfWeekHighlighted||[]),t.datesDisabled=t.datesDisabled||[],M.isArray(t.datesDisabled)||(t.datesDisabled=t.datesDisabled.split(",")),t.datesDisabled=M.map(t.datesDisabled,function(e){return A.parseDate(e,a,t.language,t.assumeNearbyYear)});var s,n,o,r=String(t.orientation).toLowerCase().split(/\s+/g),l=t.orientation.toLowerCase(),r=M.grep(r,function(e){return/^auto|left|right|top|bottom$/.test(e)});if(t.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===r.length)switch(r[0]){case"top":case"bottom":t.orientation.y=r[0];break;case"left":case"right":t.orientation.x=r[0]}else l=M.grep(r,function(e){return/^left|right$/.test(e)}),t.orientation.x=l[0]||"auto",l=M.grep(r,function(e){return/^top|bottom$/.test(e)}),t.orientation.y=l[0]||"auto";else;t.defaultViewDate instanceof Date||"string"==typeof t.defaultViewDate?t.defaultViewDate=A.parseDate(t.defaultViewDate,a,t.language,t.assumeNearbyYear):t.defaultViewDate?(s=t.defaultViewDate.year||(new Date).getFullYear(),n=t.defaultViewDate.month||0,o=t.defaultViewDate.day||1,t.defaultViewDate=$(s,n,o)):t.defaultViewDate=O()},_applyEvents:function(e){for(var t,i,a,s=0;s<e.length;s++)t=e[s][0],2===e[s].length?(i=S,a=e[s][1]):3===e[s].length&&(i=e[s][1],a=e[s][2]),t.on(a,i)},_unapplyEvents:function(e){for(var t,i,a,s=0;s<e.length;s++)t=e[s][0],2===e[s].length?(a=S,i=e[s][1]):3===e[s].length&&(a=e[s][1],i=e[s][2]),t.off(i,a)},_buildEvents:function(){var e={keyup:M.proxy(function(e){-1===M.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:M.proxy(this.keydown,this),paste:M.proxy(this.paste,this)};!0===this.o.showOnFocus&&(e.focus=M.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.inputField.length?this._events=[[this.inputField,e],[this.component,{click:M.proxy(this.show,this)}]]:this._events=[[this.element,{click:M.proxy(this.show,this),keydown:M.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:M.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:M.proxy(function(e){this._focused_from=e.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":M.proxy(function(e){this.update(e.date)},this)}]),this._secondaryEvents=[[this.picker,{click:M.proxy(this.click,this)}],[this.picker,".prev, .next",{click:M.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:M.proxy(this.dayCellClick,this)}],[M(window),{resize:M.proxy(this.place,this)}],[M(document),{"mousedown touchstart":M.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,t){var i=t||this.dates.get(-1),a=this._utc_to_local(i);this.element.trigger({type:e,date:a,viewMode:this.viewMode,dates:M.map(this.dates,this._utc_to_local),format:M.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var i=this.dates.get(e);return A.formatDate(i,t,this.o.language)},this)})},show:function(){if(!(this.inputField.is(":disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&M(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")||(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide")),this},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var t;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==M.inArray("text/plain",e.originalEvent.clipboardData.types))t=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;t=window.clipboardData.getData("Text")}this.setDate(t),this.update(),e.preventDefault()},_utc_to_local:function(e){if(!e)return e;var t=new Date(e.getTime()+6e4*e.getTimezoneOffset());return t.getTimezoneOffset()!==e.getTimezoneOffset()&&(t=new Date(e.getTime()+6e4*t.getTimezoneOffset())),t},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&$(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())},getDates:function(){return M.map(this.dates,this._utc_to_local)},getUTCDates:function(){return M.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return e!==S?new Date(e):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(e){var t=M.isArray(e)?e:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(e){var t=M.isArray(e)?e:arguments;return this.setDates.apply(this,M.map(t,this._utc_to_local)),this},setDate:e("setDates"),setUTCDate:e("setUTCDates"),remove:e("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var e=this.getFormattedDate();return this.inputField.val(e),this},getFormattedDate:function(t){t===S&&(t=this.o.format);var i=this.o.language;return M.map(this.dates,function(e){return A.formatDate(e,t,i)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this},setDaysOfWeekHighlighted:function(e){return this._process_options({daysOfWeekHighlighted:e}),this.update(),this},setDatesDisabled:function(e){return this._process_options({datesDisabled:e}),this.update(),this},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),t=this.picker.outerHeight(),i=M(this.o.container),a=i.width(),s="body"===this.o.container?M(document).scrollTop():i.scrollTop(),n=i.offset(),o=[0];this.element.parents().each(function(){var e=M(this).css("z-index");"auto"!==e&&0!==Number(e)&&o.push(Number(e))});var r=Math.max.apply(Math,o)+this.o.zIndexOffset,l=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),d=l.left-n.left,u=l.top-n.top;"body"!==this.o.container&&(u+=s),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(d-=e-h)):l.left<0?(this.picker.addClass("datepicker-orient-left"),d-=l.left-10):a<d+e?(this.picker.addClass("datepicker-orient-right"),d+=h-e):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var p,f=this.o.orientation.y;return"auto"===f&&(f=-s+u-t<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+f),"top"===f?u-=t+parseInt(this.picker.css("padding-top")):u+=c,this.o.rtl?(p=a-(d+h),this.picker.css({top:u,right:p,zIndex:r})):this.picker.css({top:u,left:d,zIndex:r}),this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),i=[],t=!1;return arguments.length?(M.each(arguments,M.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),i.push(t)},this)),t=!0):(i=(i=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=M.map(i,M.proxy(function(e){return A.parseDate(e,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),i=M.grep(i,M.proxy(function(e){return!this.dateWithinRange(e)||!e},this),!0),this.dates.replace(i),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),t?(this.setValue(),this.element.change()):this.dates.length&&String(e)!==String(this.dates)&&t&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&e.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var e=this.o.weekStart,t="<tr>";for(this.o.calendarWeeks&&(t+='<th class="cw">&#160;</th>');e<this.o.weekStart+7;)t+='<th class="dow',-1!==M.inArray(e,this.o.daysOfWeekDisabled)&&(t+=" disabled"),t+='">'+U[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)}},fillMonths:function(){for(var e=this._utc_to_local(this.viewDate),t="",i=0;i<12;i++)t+='<span class="month'+(e&&e.getMonth()===i?" focused":"")+'">'+U[this.o.language].monthsShort[i]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=M.map(e,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var t=[],i=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),s=O();return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<a?t.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>a)&&t.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&t.push("focused"),this.o.todayHighlight&&n(e,s)&&t.push("today"),-1!==this.dates.contains(e)&&t.push("active"),this.dateWithinRange(e)||t.push("disabled"),this.dateIsDisabled(e)&&t.push("disabled","disabled-date"),-1!==M.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&t.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&t.push("range"),-1!==M.inArray(e.valueOf(),this.range)&&t.push("selected"),e.valueOf()===this.range[0]&&t.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&t.push("range-end")),t},_fill_yearsView:function(e,t,i,a,s,n,o){for(var r,l,c,h="",d=i/10,u=this.picker.find(e),p=Math.floor(a/i)*i,f=p+9*d,m=Math.floor(this.viewDate.getFullYear()/d)*d,g=M.map(this.dates,function(e){return Math.floor(e.getUTCFullYear()/d)*d}),v=p-d;v<=f+d;v+=d)r=[t],l=null,v===p-d?r.push("old"):v===f+d&&r.push("new"),-1!==M.inArray(v,g)&&r.push("active"),(v<s||n<v)&&r.push("disabled"),v===m&&r.push("focused"),o!==M.noop&&((c=o(new Date(v,0,1)))===S?c={}:"boolean"==typeof c?c={enabled:c}:"string"==typeof c&&(c={classes:c}),!1===c.enabled&&r.push("disabled"),c.classes&&(r=r.concat(c.classes.split(/\s+/))),c.tooltip&&(l=c.tooltip)),h+='<span class="'+r.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+v+"</span>";u.find(".datepicker-switch").text(p+"-"+f),u.find("td").html(h)},fill:function(){var e,t,i=new Date(this.viewDate),s=i.getUTCFullYear(),a=i.getUTCMonth(),n=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,o=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,r=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,c=U[this.o.language].today||U.en.today||"",h=U[this.o.language].clear||U.en.clear||"",d=U[this.o.language].titleFormat||U.en.titleFormat,u=O(),p=(!0===this.o.todayBtn||"linked"===this.o.todayBtn)&&u>=this.o.startDate&&u<=this.o.endDate&&!this.weekOfDateIsDisabled(u);if(!isNaN(s)&&!isNaN(a)){this.picker.find(".datepicker-days .datepicker-switch").text(A.formatDate(i,d,this.o.language)),this.picker.find("tfoot .today").text(c).css("display",p?"table-cell":"none"),this.picker.find("tfoot .clear").text(h).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var f=$(s,a,0),m=f.getUTCDate();f.setUTCDate(m-(f.getUTCDay()-this.o.weekStart+7)%7);var g=new Date(f);f.getUTCFullYear()<100&&g.setUTCFullYear(f.getUTCFullYear()),g.setUTCDate(g.getUTCDate()+42),g=g.valueOf();for(var v,y,w,k,b,D,T=[];f.valueOf()<g;){(D=f.getUTCDay())===this.o.weekStart&&(T.push("<tr>"),this.o.calendarWeeks&&(y=new Date(+f+(this.o.weekStart-D-7)%7*864e5),w=new Date(Number(y)+(11-y.getUTCDay())%7*864e5),k=new Date(Number(k=$(w.getUTCFullYear(),0,1))+(11-k.getUTCDay())%7*864e5),b=(w-k)/864e5/7+1,T.push('<td class="cw">'+b+"</td>"))),(v=this.getClassNames(f)).push("day");var C=f.getUTCDate();this.o.beforeShowDay!==M.noop&&((t=this.o.beforeShowDay(this._utc_to_local(f)))===S?t={}:"boolean"==typeof t?t={enabled:t}:"string"==typeof t&&(t={classes:t}),!1===t.enabled&&v.push("disabled"),t.classes&&(v=v.concat(t.classes.split(/\s+/))),t.tooltip&&(e=t.tooltip),t.content&&(C=t.content)),v=M.isFunction(M.uniqueSort)?M.uniqueSort(v):M.unique(v),T.push('<td class="'+v.join(" ")+'"'+(e?' title="'+e+'"':"")+' data-date="'+f.getTime().toString()+'">'+C+"</td>"),e=null,D===this.o.weekEnd&&T.push("</tr>"),f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(T.join(""));var _,F=U[this.o.language].monthsTitle||U.en.monthsTitle||"Months",x=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?F:s).end().find("tbody span").removeClass("active");M.each(this.dates,function(e,t){t.getUTCFullYear()===s&&x.eq(t.getUTCMonth()).addClass("active")}),(s<n||r<s)&&x.addClass("disabled"),s===n&&x.slice(0,o).addClass("disabled"),s===r&&x.slice(l+1).addClass("disabled"),this.o.beforeShowMonth!==M.noop&&(_=this,M.each(x,function(e,t){var i=new Date(s,e,1),a=_.o.beforeShowMonth(i);a===S?a={}:"boolean"==typeof a?a={enabled:a}:"string"==typeof a&&(a={classes:a}),!1!==a.enabled||M(t).hasClass("disabled")||M(t).addClass("disabled"),a.classes&&M(t).addClass(a.classes),a.tooltip&&M(t).prop("title",a.tooltip)})),this._fill_yearsView(".datepicker-years","year",10,s,n,r,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,s,n,r,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,s,n,r,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var e,t,i=new Date(this.viewDate),a=i.getUTCFullYear(),s=i.getUTCMonth(),n=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,o=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,r=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,c=1;switch(this.viewMode){case 4:c*=10;case 3:c*=10;case 2:c*=10;case 1:e=Math.floor(a/c)*c<=n,t=Math.floor(a/c)*c+c>r;break;case 0:e=a<=n&&s<=o,t=r<=a&&l<=s}this.picker.find(".prev").toggleClass("disabled",e),this.picker.find(".next").toggleClass("disabled",t)}},click:function(e){var t,i,a;e.preventDefault(),e.stopPropagation(),(t=M(e.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),t.hasClass("today")&&!t.hasClass("day")&&(this.setViewMode(0),this._setDate(O(),"linked"===this.o.todayBtn?null:"view")),t.hasClass("clear")&&this.clearDates(),t.hasClass("disabled")||(t.hasClass("month")||t.hasClass("year")||t.hasClass("decade")||t.hasClass("century"))&&(this.viewDate.setUTCDate(1),1===this.viewMode?(a=t.parent().find("span").index(t),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(a)):(a=0,i=Number(t.text()),this.viewDate.setUTCFullYear(i)),this._trigger(A.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate($(i,a,1)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(e){var t=M(e.currentTarget).data("date"),i=new Date(t);this.o.updateViewDate&&(i.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),i.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(i)},navArrowsClick:function(e){var t=M(e.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(t*=12*A.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,t),this._trigger(A.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(!0===this.o.multidate||1<this.o.multidate||this.o.toggleActive)&&this.dates.remove(t):(!1===this.o.multidate&&this.dates.clear(),this.dates.push(e)),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),(!t&&this.o.updateViewDate||"view"===t)&&(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||t&&"date"!==t||this.hide()},moveDay:function(e,t){var i=new Date(e);return i.setUTCDate(e.getUTCDate()+t),i},moveWeek:function(e,t){return this.moveDay(e,7*t)},moveMonth:function(e,t){if(!(i=e)||isNaN(i.getTime()))return this.o.defaultViewDate;var i;if(!t)return e;var a,s,n=new Date(e.valueOf()),o=n.getUTCDate(),r=n.getUTCMonth(),l=Math.abs(t);if(t=0<t?1:-1,1===l)s=-1===t?function(){return n.getUTCMonth()===r}:function(){return n.getUTCMonth()!==a},a=r+t,n.setUTCMonth(a),a=(a+12)%12;else{for(var c=0;c<l;c++)n=this.moveMonth(n,t);a=n.getUTCMonth(),n.setUTCDate(o),s=function(){return a!==n.getUTCMonth()}}for(;s();)n.setUTCDate(--o),n.setUTCMonth(a);return n},moveYear:function(e,t){return this.moveMonth(e,12*t)},moveAvailableDate:function(e,t,i){do{if(e=this[i](e,t),!this.dateWithinRange(e))return!1;i="moveDay"}while(this.dateIsDisabled(e));return e},weekOfDateIsDisabled:function(e){return-1!==M.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||0<M.grep(this.o.datesDisabled,function(e){return n(t,e)}).length},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":visible")){var t,i,a=!1,s=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault(),e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;t=37===e.keyCode||38===e.keyCode?-1:1,0===this.viewMode?e.ctrlKey?(i=this.moveAvailableDate(s,t,"moveYear"))&&this._trigger("changeYear",this.viewDate):e.shiftKey?(i=this.moveAvailableDate(s,t,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===e.keyCode||39===e.keyCode?i=this.moveAvailableDate(s,t,"moveDay"):this.weekOfDateIsDisabled(s)||(i=this.moveAvailableDate(s,t,"moveWeek")):1===this.viewMode?(38!==e.keyCode&&40!==e.keyCode||(t*=4),i=this.moveAvailableDate(s,t,"moveMonth")):2===this.viewMode&&(38!==e.keyCode&&40!==e.keyCode||(t*=4),i=this.moveAvailableDate(s,t,"moveYear")),i&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),e.preventDefault());break;case 13:if(!this.o.forceParse)break;s=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(s),a=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}a&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else 40!==e.keyCode&&27!==e.keyCode||(this.show(),e.stopPropagation())},setViewMode:function(e){this.viewMode=e,this.picker.children("div").hide().filter(".datepicker-"+A.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};function c(e,t){M.data(e,"datepicker",this),this.element=M(e),this.inputs=M.map(t.inputs,function(e){return e.jquery?e[0]:e}),delete t.inputs,this.keepEmptyValues=t.keepEmptyValues,delete t.keepEmptyValues,s.call(M(this.inputs),t).on("changeDate",M.proxy(this.dateUpdated,this)),this.pickers=M.map(this.inputs,function(e){return M.data(e,"datepicker")}),this.updateDates()}c.prototype={updateDates:function(){this.dates=M.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var i=M.map(this.dates,function(e){return e.valueOf()});M.each(this.pickers,function(e,t){t.setRange(i)})},clearDates:function(){M.each(this.pickers,function(e,t){t.clearDates()})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var i=M.data(e.target,"datepicker");if(i!==S){var a=i.getUTCDate(),s=this.keepEmptyValues,t=M.inArray(e.target,this.inputs),n=t-1,o=t+1,r=this.inputs.length;if(-1!==t){if(M.each(this.pickers,function(e,t){t.getUTCDate()||t!==i&&s||t.setUTCDate(a)}),a<this.dates[n])for(;0<=n&&a<this.dates[n];)this.pickers[n--].setUTCDate(a);else if(a>this.dates[o])for(;o<r&&a>this.dates[o];)this.pickers[o++].setUTCDate(a);this.updateDates(),delete this.updating}}}},destroy:function(){M.map(this.pickers,function(e){e.destroy()}),M(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:e("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var a=M.fn.datepicker,s=function(o){var r,l=Array.apply(null,arguments);if(l.shift(),this.each(function(){var e,t,i,a=M(this),s=a.data("datepicker"),n="object"==typeof o&&o;s||(e=function(e,t){var i,a=M(e).data(),s={},n=new RegExp("^"+t.toLowerCase()+"([A-Z])");function o(e,t){return t.toLowerCase()}for(i in t=new RegExp("^"+t.toLowerCase()),a)t.test(i)&&(s[i.replace(n,o)]=a[i]);return s}(this,"date"),t=function(e){var i={};if(U[e]||(e=e.split("-")[0],U[e])){var a=U[e];return M.each(d,function(e,t){t in a&&(i[t]=a[t])}),i}}(M.extend({},h,e,n).language),i=M.extend({},h,t,e,n),s=a.hasClass("input-daterange")||i.inputs?(M.extend(i,{inputs:i.inputs||a.find("input").toArray()}),new c(this,i)):new b(this,i),a.data("datepicker",s)),"string"==typeof o&&"function"==typeof s[o]&&(r=s[o].apply(s,l))}),r===S||r instanceof b||r instanceof c)return this;if(1<this.length)throw new Error("Using only allowed for the collection of a single element ("+o+" function)");return r};M.fn.datepicker=s;var h=M.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:M.noop,beforeShowMonth:M.noop,beforeShowYear:M.noop,beforeShowDecade:M.noop,beforeShowCentury:M.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},d=M.fn.datepicker.locale_opts=["format","rtl","weekStart"];M.fn.datepicker.Constructor=b;var U=M.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},A={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(e){if("function"==typeof e.toValue&&"function"==typeof e.toDisplay)return e;var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(e,t,i,s){if(!e)return S;if(e instanceof Date)return e;if("string"==typeof t&&(t=A.parseFormat(t)),t.toValue)return t.toValue(e,t,i);var a,n,o,r,l={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},c={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(e in c&&(e=c[e]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(e)){for(a=e.match(/([\-+]\d+)([dmwy])/gi),e=new Date,w=0;w<a.length;w++)n=a[w].match(/([\-+]\d+)([dmwy])/i),o=Number(n[1]),r=l[n[2].toLowerCase()],e=b.prototype[r](e,o);return b.prototype._zero_utc_time(e)}a=e&&e.match(this.nonpunctuation)||[];var h,d,u={},p=["yyyy","yy","M","MM","m","mm","d","dd"],f={yyyy:function(e,t){return e.setUTCFullYear(s?(!0===(a=s)&&(a=10),(i=t)<100&&(i+=2e3)>(new Date).getFullYear()+a&&(i-=100),i):t);var i,a},m:function(e,t){if(isNaN(e))return e;for(--t;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};f.yy=f.yyyy,f.M=f.MM=f.mm=f.m,f.dd=f.d,e=O();var m=t.parts.slice();function g(){var e=this.slice(0,a[w].length),t=a[w].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(a.length!==m.length&&(m=M(m).filter(function(e,t){return-1!==M.inArray(t,p)}).toArray()),a.length===m.length){for(var v,y,w=0,k=m.length;w<k;w++){if(h=parseInt(a[w],10),n=m[w],isNaN(h))switch(n){case"MM":d=M(U[i].months).filter(g),h=M.inArray(d[0],U[i].months)+1;break;case"M":d=M(U[i].monthsShort).filter(g),h=M.inArray(d[0],U[i].monthsShort)+1}u[n]=h}for(w=0;w<p.length;w++)(y=p[w])in u&&!isNaN(u[y])&&(v=new Date(e),f[y](v,u[y]),isNaN(v)||(e=v))}return e},formatDate:function(e,t,i){if(!e)return"";if("string"==typeof t&&(t=A.parseFormat(t)),t.toDisplay)return t.toDisplay(e,t,i);var a={d:e.getUTCDate(),D:U[i].daysShort[e.getUTCDay()],DD:U[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:U[i].monthsShort[e.getUTCMonth()],MM:U[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m,e=[];for(var s=M.extend([],t.separators),n=0,o=t.parts.length;n<=o;n++)s.length&&e.push(s.shift()),e.push(a[t.parts[n]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+h.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+h.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};A.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+A.headTemplate+"<tbody></tbody>"+A.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+A.headTemplate+A.contTemplate+A.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+A.headTemplate+A.contTemplate+A.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+A.headTemplate+A.contTemplate+A.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+A.headTemplate+A.contTemplate+A.footTemplate+"</table></div></div>",M.fn.datepicker.DPGlobal=A,M.fn.datepicker.noConflict=function(){return M.fn.datepicker=a,this},M.fn.datepicker.version="1.9.0",M.fn.datepicker.deprecated=function(e){var t=window.console;t&&t.warn&&t.warn("DEPRECATED: "+e)},M(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var t=M(this);t.data("datepicker")||(e.preventDefault(),s.call(t,"show"))}),M(function(){s.call(M('[data-provide="datepicker-inline"]'))})});var bulkSelectAll=function(){$("#bulk-select-all").click(function(){var e=$(this);$(".field-bulk-select input").prop("checked",e.is(":checked"))})},bulkActionSubmit=function(){$("#bulk-action_0, #bulk-action_1").removeAttr("onchange"),$("#bulk-action_0, #bulk-action_1").change(function(){var e,t=this.form,i=$(this).find("option:selected"),a=$('input:checkbox:checked[name="object_ids"]'),s=!1;i.attr("value")&&"empty"!==i.attr("value")&&a.length&&("delete"===i.val()?(a.each(function(){var e=$(this);if(1<parseInt(e.attr("data-event-instance-count")))return!(s=!0)}),s?((e=$("#bulk-event-delete-modal")).find("#bulk-event-delete-btn").click(function(){t.submit()}),e.modal()):t.submit()):t.submit())})},toggleEventListRecurrences=function(){$(".recurrences-toggle").click(function(e){e.preventDefault(),$(this).next(".recurrences").slideToggle()})},toggleModalMergeObject=function(){var n=$("#object-merge-modal");$(".category-merge, .tag-merge, .location-merge").click(function(e){e.preventDefault();var t=$(this).attr("data-object-title"),i=$(this).attr("data-object-pk"),a=$(this).attr("href"),s="",s=$(this).hasClass("category-merge")?"category":"tag";n.find("#new-object-select option").each(function(){$(this).text()===t&&$(this).val()===i?$(this).prop("disabled",!0):$(this).prop("disabled",!1)}),n.find("span.object-type").text(s).end().find("h2 span.alt").text(t).end().find(".modal-footer a.btn-primary").attr("href",a).end().modal("show")});var i=n.find(".modal-footer a.btn:first-child");i.click(function(){var e=$("#new-object-select").val(),t=i.attr("href");""!==e&&(t=t.replace(/merge\/[A-Za-z0-9]+$/,"merge/"+e),i.attr("href",t))})},calendarOwnershipModal=function(){var i;$("#calendar-reassign-ownership")&&(i=$("#calendar-reassign-ownership").find(".modal-footer a.btn:first-child")).click(function(){var e=$("#new-owner-select").val(),t=i.attr("href");""!==e&&(t=t.replace(/user\/[A-Za-z0-9]+$/,"user/"+e),i.attr("href",t))})},toggleModalUserDemote=function(){var a=$("#user-demote-modal");$(".demote-self").click(function(e){e.preventDefault();var t=$(this).attr("data-user-name"),i=$(this).attr("href");a.find("h2 span.alt").text(t).end().find(".modal-footer a.btn-danger").attr("href",i).end().modal("show")});var i=a.find(".modal-footer a.btn:first-child");i.click(function(){var e=$("#new-object-select").val(),t=i.attr("href");""!==e&&(t=t.replace(/merge\/[A-Za-z0-9]+$/,"merge/"+e),i.attr("href",t))})},fallbackDtpOnClick=function(e){var t=e.siblings("input");t.is(":focus")||t.focus()},initiateDatePickers=function(e){e.each(function(){var e=$(this);!1===e.parent().hasClass("bootstrap-datepicker")&&e.addClass("form-control").wrap('<div class="bootstrap-dtp bootstrap-datepicker" />').parent().append('<i class="fa fa-calendar" />');var t=e.parent().parent(),i=t.siblings().find("."+e.attr("class"));e.datepicker({format:"mm/dd/yyyy",autoclose:!0,todayHighlight:!0,startDate:EARLIEST_VALID_DATE,endDate:LATEST_VALID_DATE}).on("changeDate",function(e){i.length&&t.hasClass("start")?i.datepicker("setStartDate",e.date):i.length&&t.hasClass("end")&&i.datepicker("setEndDate",e.date)}),t.find("i").on("click",function(){fallbackDtpOnClick($(this))})}).removeClass("placeholder").placeholder()},initiateTimePickers=function(e){e.each(function(){var e=$(this);!1===e.parent().hasClass("bootstrap-timepicker")&&e.addClass("form-control").wrap('<div class="bootstrap-dtp bootstrap-timepicker" />').parent().append('<i class="fa fa-clock-o" />'),e.parent().parent().find("i").on("click",function(){fallbackDtpOnClick($(this))})}).timepicker({scrollDefaultNow:!0,timeFormat:"h:i A",step:15}).removeClass("placeholder").placeholder()},initiateReReviewCopy=function(){$("#copy_title").click(function(e){e.preventDefault(),$("#"+$(this).attr("data-copy-to")).val($("#new_title").val())}),$("#copy_description").click(function(e){e.preventDefault(),tinyMCE.get($(this).attr("data-copy-to")).setContent($("#new_description").val())})},selectFieldAutocomplete=function(e,t){this.autocompleteField=e,this.dataField=t,this.form=t.parents("form"),this.searchableTerms=[],this.mappedData={},this.selection=null,this.setupForm=function(){},this.onFormSubmission=function(){var e=this;e.form.on("submit",function(){if(e.autocompleteField.is(":focus"))return!1})},this.checkEmptyValues=function(){var t=this;t.autocompleteField.on("keydown",function(e){t.autocompleteField.val()||"keydown"!==e.type||8!==e.keyCode&&46!==e.keyCode||(t.autocompleteField.trigger("change"),t.dataField.is("select")&&(t.dataField.children("option:selected").removeAttr("selected"),t.dataField.children("option:selected").prop("selected",!1)),t.dataField.val(""))})},this.setSearchTerms=function(){var a=this;a.dataField.is("select")&&$.each(a.dataField.children("option:not([disabled])"),function(){var e=$(this),t=e.val(),i=e.text();$.trim(i).length<1&&(i=t+" (name n/a)"),a.mappedData[i]=t,a.searchableTerms.push(i)})},this.typeaheadSource=function(e,t){return t(this.searchableTerms)},this.typeaheadMatcher=function(e,t){if(-1!==e.toLowerCase().indexOf(t.trim().toLowerCase()))return!0},this.typeaheadUpdater=function(e){var t=this;return t.selection=t.mappedData[e],t.dataField.val(t.selection),t.dataField.is("select")&&t.dataField.children('option[value="'+t.selection+'"]').attr("selected",!0).prop("selected",!0),e},this.init=function(){var i=this;i.setupForm(),i.onFormSubmission(),i.checkEmptyValues(),i.setSearchTerms(),i.autocompleteField.typeahead({items:10,minLength:2,source:function(e,t){i.typeaheadSource(e,t)},matcher:function(e){var t=this.query;return i.typeaheadMatcher(e,t)},updater:function(e){return e=i.typeaheadUpdater(e)}})}},userSearchTypeahead=function(){var e=$("#id_add_user"),t=$("#id_username_d"),i=$("#id_role"),a=t.parents("form").find("button"),s=new selectFieldAutocomplete(e,t);s.roleField=i,s.addBtn=a,s.setupForm=function(){var t=this;t.dataField.hide(),t.autocompleteField.show(),$('label[for="'+t.dataField.attr("id")+'"]').attr("for",t.autocompleteField.attr("id"));function i(e){e.preventDefault()}function e(){var e;""!==t.autocompleteField.val()&&t.dataField.val()&&""!==t.roleField.val()&&t.autocompleteField.val()!==t.autocompleteField.attr("placeholder")&&void 0!==(e=t.dataField.children("option").selected||t.dataField.children('option[selected="selected"]'))&&0<e.length&&e.text()===t.autocompleteField.val()?t.addBtn.removeClass("disabled").unbind("click",i):t.addBtn.addClass("disabled").bind("click",i)}e(),$([t.autocompleteField,t.dataField,t.roleField]).each(function(){$(this).on("change",function(){e()})})},s.onFormSubmission=function(){var a=this;a.form.on("submit",function(){return!a.autocompleteField.is(":focus")&&void(!1===a.form.find("button").hasClass("disabled")&&(i=a.form.attr("action"),e=a.dataField.children("option:selected").val(),t=a.roleField.val(),i=i.replace("/username/role","/"+e+"/"+t),a.form.attr("action",i)));var e,t,i})},s.init()},eventLocationsSearch=function(e){0<e.length&&e.each(function(){var e=$(this),t=e.attr("id")+"-autocomplete",i=$('<input type="text" id="'+t+'" class="form-control location-autocomplete search-query" autocomplete="off" placeholder="Type a location name..." />'),a=e.parent(".location-search").parent(".row"),s=a.find(".location-selected-title"),n=a.find(".location-selected-room"),o=a.find(".location-selected-url"),r=a.find(".location-new-form"),l=new selectFieldAutocomplete(i,e);l.addBtn=$('<a class="autocomplete-new-btn btn btn-success" href="#" alt="Create New Location"><i class="fa fa-plus"></i></a>'),l.removeBtn=$('<a class="location-selected-remove" href="#" alt="Remove Location" title="Remove Location">&times;</a>'),l.locationRow=a,l.locationTitleSpan=s,l.locationRoomSpan=n,l.locationUrlSpan=o,l.newLocationForm=r,l.createNewLocation=function(e){var t=this;t.removeLocation(),t.newLocationForm.show().children('input[name*="-new_location_title"]').val(e),t.removeBtn.show(),t.addBtn.hide(),t.autocompleteField.val("")},l.removeLocation=function(){var e=this;e.locationTitleSpan.text("").hide(),e.locationRoomSpan.text("").hide(),e.locationUrlSpan.text("").hide(),e.newLocationForm.hide().children("input").val(""),e.dataField.children('option[selected="selected"]').removeAttr("selected").prop("selected",!1),e.removeBtn.hide()},l.setupForm=function(){var s=this;s.locationRow.find("."+s.addBtn.attr("class")).remove(),s.locationRow.find("."+s.removeBtn.attr("class")).remove(),s.locationRow.find("#"+s.autocompleteField.attr("id")).remove(),s.dataField.hide(),s.autocompleteField.insertAfter(s.dataField).show(),$('label[for="'+s.dataField.attr("id")+'"]').attr("for",s.autocompleteField.attr("id")),s.addBtn.insertAfter(s.autocompleteField).hide(),s.removeBtn.insertBefore(s.locationTitleSpan),s.newLocationForm.children('input[name*="-new_location_title"]').val()||s.newLocationForm.hide();var e=0!==s.newLocationForm.find("input").filter(function(){return""!==$.trim($(this).val())}).length;""!==s.dataField.val()||""!==$.trim(s.locationTitleSpan.text())||e||s.removeBtn.hide(),s.removeBtn.on("click",function(e){e.preventDefault(),s.removeLocation()}),s.addBtn.on("click",function(e){e.preventDefault();var t=s.autocompleteField.val();s.createNewLocation(t)}),s.autocompleteField.on("keydown focus",function(e){var t=s.autocompleteField.siblings(".typeahead.dropdown-menu"),i=Boolean(0<t.children("li").length&&t.is(":visible"));if(""!==s.autocompleteField.val())if(i||"keydown"!==e.type||13===e.keyCode||188===e.keyCode){if(!i&&"keydown"===e.type&&13===e.keyCode||"keydown"===e.type&&188===e.keyCode){var a=s.autocompleteField.val();return s.createNewLocation(a),s.addBtn.hide(),!1}}else s.addBtn.show();else s.addBtn.hide()})},l.typeaheadUpdater=function(e){var t=this;t.removeLocation(),t.selection=t.mappedData[e],t.dataField.val(t.selection).children('option[value="'+t.selection+'"]').attr("selected",!0).prop("selected",!0);var i=eventLocations[t.selection];return"None"!==i.title&&""!==i.title&&t.locationTitleSpan.text(i.title).show(),"None"!==i.room&&""!==i.room&&t.locationRoomSpan.text(i.room).show(),"None"!==i.url&&""!==i.url&&t.locationUrlSpan.html('<a href="'+i.url+'">'+i.url+"</a>").show(),t.removeBtn.show(),t.addBtn.hide(),""},l.init()})},eventTagging=function(){var e,n=$('<input type="text" class="form-control" id="id_event-tags-autocomplete" autocomplete="off" placeholder="Type a tag or phrase..." />'),t=$("#id_event-tags"),i=$('<a class="autocomplete-new-btn btn btn-success" href="#" alt="Create New Tag"><i class="fa fa-plus"></i></a>'),a=$("#event-tags-selected");0<t.length&&((e=new selectFieldAutocomplete(n,t)).addBtn=i,e.selectedTagsList=a,e.selectedTagsArray=[],e.createTag=function(e){var t=this,i=$('<a href="#" class="selected-remove" alt="Remove this tag" title="Remove this tag">&times;</a>');if(i.on("click",function(e){e.preventDefault(),t.removeTag($(this).parent("li"))}),!(0<e.length))return!1;$('<li data-tag-name="'+e+'">'+e+"</li>").appendTo(t.selectedTagsList).prepend(i),t.addBtn.hide()},e.removeTag=function(e){this.selectedTagsList.find(e).remove();var t=e.attr("data-tag-name");this.selectedTagsArray.splice($.inArray(t,this.selectedTagsArray),1)},e.getCleanItemVal=function(e){return $.trim(e.replace(/([^a-zA-Z0-9\s-!$#%&+|:?])/g,""))},e.setupForm=function(){var e,t,s=this;s.dataField.is(":visible")&&(e="",s.dataField.val()?e=s.dataField.val():s.dataField.attr("value")&&(e=s.dataField.attr("value")),""!==e&&(t=$.grep(e.replace(/(&quot;?)|\"/g,"").split(","),function(e){return""!==e}),s.selectedTagsArray=s.selectedTagsArray.concat(t),s.selectedTagsList.children().length<1&&$.each(t,function(e,t){s.createTag(s.getCleanItemVal(t))})),s.dataField.hide(),s.autocompleteField.insertAfter(s.dataField).show(),$('label[for="'+s.dataField.attr("id")+'"]').attr("for",s.autocompleteField.attr("id")),s.addBtn.insertAfter(s.autocompleteField).hide(),s.dataField.siblings(".help-block").html('Type a word or phrase, then hit the "enter" key or type a comma to add it to your list of tags.<br><br>Please note that tags are case-insensitive.')),s.addBtn.on("click",function(e){e.preventDefault();var t=s.getCleanItemVal(s.autocompleteField.val());0<t.length&&s.typeaheadUpdater(t)}),s.autocompleteField.on("keydown focus",function(e){var t=s.autocompleteField.siblings(".typeahead.dropdown-menu"),i=Boolean(0<t.children("li").length&&t.is(":visible"));if(""!==s.autocompleteField.val())if(i||"keydown"!==e.type||13===e.keyCode||188===e.keyCode){if(!i&&"keydown"===e.type&&13===e.keyCode||"keydown"===e.type&&188===e.keyCode){var a=s.getCleanItemVal(n.val());return 0<a.length&&s.typeaheadUpdater(a),s.addBtn.hide(),!1}}else s.addBtn.show();else s.addBtn.hide()})},e.onFormSubmission=function(){var t=this;t.form.on("submit",function(){if(t.autocompleteField.is(":focus"))return!1;""!==t.autocompleteField.val()&&t.autocompleteField.val()!==t.autocompleteField.attr("placeholder")&&t.selectedTagsArray.push(t.autocompleteField.val());var e=t.selectedTagsArray.toString()+",";t.dataField.val(e).attr("value",e)})},e.setSearchTerms=function(){var i=this;i.searchableTerms=eventTags,$.each(eventTags,function(e,t){i.mappedData[t]=t})},e.typeaheadUpdater=function(e){var t=this;return t.selection=t.mappedData[e],t.selectedTagsArray.push(e),t.autocompleteField.val(""),t.createTag(e),""},e.init())};function cloneableEventInstances(){var i,n,s,o,r,l,e;function c(e,t,i){e.attr("id",i);for(var a=e.find("checkbox, input, select, label"),s=e.find(".remove-instance"),n=new RegExp(t,"gm"),o=0;o<a.length;o++){var r=a.eq(o),l=r.attr("for"),c=r.attr("id"),h=r.attr("name");l&&r.attr("for",l.replace(n,i)),c&&r.attr("id",c.replace(n,i)),h&&r.attr("name",h.replace(n,i))}return s.attr("data-instance","#"+i),e}function t(){var e,t,i,a;p()<l?(i=s.clone(!1),e=n.find(".event-instance"),t=r+"-"+e.length,(i=c(i,i.attr("id"),t)).addClass("clone").hide().insertAfter(n.find(".event-instance:last")).slideDown(300),m(i),a=parseInt(o.val(),10)+1,o.val(a),n.trigger("formChanged")):window.alert("Sorry, an event cannot have more than "+l+" unique event instances.")}function a(e){e.preventDefault(),t()}function h(){var e=$(this);if(e.hasClass("clone")){e.remove();for(var t=n.find(".event-instance"),i=0;i<t.length;i++){var a,s=t.eq(i);s.hasClass("clone")&&(a=r+"-"+i,c(s,s.attr("id"),a),m(s))}}else e.addClass("event-instance-removed").find("#id_"+e.attr("id")+"-DELETE").prop("checked",!0);n.trigger("formChanged")}function d(e){var t,i=p(),a=e.hasClass("clone");1<i&&(e.slideUp(300,h),a&&(t=parseInt(o.val(),10)-1,o.val(t)))}function u(e){e.preventDefault();var t=$(e.target);d(n.find(t.attr("data-instance")))}function p(){return n.find(".event-instance:not(.event-instance-removed)").length}function f(){var e,t;e=p(),t=n.find(".remove-instance"),1===e?t.addClass("hidden"):t.removeClass("hidden"),p()<l?i.removeClass("disabled"):i.addClass("disabled")}function m(e){return e.off("click",".remove-instance",u),e.on("click",".remove-instance",u),initiateDatePickers(e.find(".field-date")),initiateTimePickers(e.find(".field-time")),eventLocationsSearch(e.find(".location-dropdown")),e}(n=$("#event-instance-form")).length&&(r=n.attr("data-form-prefix"),e=r+"-__prefix__",s=n.find("#"+e).detach(),i=n.find("#cloner"),o=n.siblings("#id_"+r+"-TOTAL_FORMS"),l=parseInt(n.siblings("#id_"+r+"-MAX_NUM_FORMS").val(),10),function(){i.removeClass("hidden").on("click",a);for(var e=n.find(".event-instance"),t=0;t<e.length;t++)m(e.eq(t));n.on("formChanged",f).trigger("formChanged")}())}var eventContactInfo=function(){var i=$("#add-user-contact-info");"undefined"!=typeof usersFullName&&"undefined"!=typeof usersEmail?i.on("change",function(){var e=$("#id_event-contact_name"),t=$("#id_event-contact_email");usersFullName&&usersEmail&&(i.is(":checked")?(e.val(usersFullName),t.val(usersEmail)):e.val()===usersFullName&&t.val()===usersEmail&&(e.val(""),t.val("")))}):i.parent().hide()},initiateWysiwygs=function(){$(".wysiwyg").length&&tinymce.init({selector:".wysiwyg",plugins:"link paste autoresize",valid_elements:"p[style],span[style],br,strong/b,em/i,u,a[href|title|style|alt|target=_blank],ul,ol,li",valid_styles:{p:"font-weight,text-decoration",span:"font-weight,text-decoration",a:"font-weight,text-decoration"},statusbar:!1,menubar:!1,toolbar:"bold italic underline | bullist numlist | link",autoresize_bottom_margin:10})};$(document).ready(function(){bulkSelectAll(),bulkActionSubmit(),toggleEventListRecurrences(),toggleModalMergeObject(),calendarOwnershipModal(),toggleModalUserDemote(),initiateReReviewCopy(),userSearchTypeahead(),eventTagging(),cloneableEventInstances(),eventContactInfo(),initiateWysiwygs()});